"use strict";(self.webpackChunkzhen_fe2=self.webpackChunkzhen_fe2||[]).push([[730],{2730:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var n=r(8216),a=r(7294),c=r(2106),l=r(561),i=r(531),o=r(8293),s=r(4184),u=r.n(s),m=r(5485),d=r(4414);const f=function(e){e.data;var t=e.getdata,r=e.count,n=void 0===r?0:r,c=e.limit,l=void 0===c?10:c,i=e.page,o=void 0===i?1:i,s=e.length,f=void 0===s?10:s,p=function(e){"function"==typeof t&&t(e)},g=function(){var e=Math.ceil(n/l),t=Math.ceil(o/f),r=Math.min(t*f,e);return{start:t*f-f+1,end:r,canprev:o>1,cannext:o<e,pagecount:e}}(),y=g.start,b=g.end,h=g.canprev,x=g.cannext,v=g.pagecount,E=(o-1)*l+1,N=v===o?n:o*l;return n<=0?null:a.createElement("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},a.createElement("div",{className:"flex-1 flex justify-between sm:hidden"},h?a.createElement("div",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:function(){return p(o-1)}},"Previous"):null,x?a.createElement("div",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:function(){return p(o+1)}},"Next"):null),a.createElement("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},a.createElement("div",null,a.createElement("p",{className:"text-sm text-gray-700"},a.createElement("span",{className:"mr-1"},"Showing"),a.createElement("span",{className:"mr-1 font-medium"},E),a.createElement("span",{className:"mr-1"},"to"),a.createElement("span",{className:"mr-1 font-medium"},N),a.createElement("span",{className:"mr-1"},"of"," "),a.createElement("span",{className:"mr-1 font-medium"},n),a.createElement("span",{className:""},"results"))),a.createElement("div",null,a.createElement("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},a.createElement("div",{href:"#",className:u()("relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",{"text-gray-500":1!==E,"hover:bg-gray-50":1!==E,"text-gray-300":1===E}),onClick:function(){1!==E&&p(o-1)}},a.createElement("span",{className:"sr-only"},"Previous"),a.createElement(m.Z,{className:"h-5 w-5","aria-hidden":"true"})),function(e,t,r){for(var n=[],c=function(e){n.push(a.createElement("div",{key:e,"aria-current":"page",className:"relative items-center px-4 py-2 border text-sm font-medium select-none ".concat(u()({"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 hidden md:inline-flex cursor-pointer":e!==r,"inline-flex z-10 bg-indigo-50 border-indigo-500 text-indigo-600 cursor-default":e===r})),onClick:function(){return p(e)}},e))},l=e;l<=t;l++)c(l);return n}(y,b,o),a.createElement("div",{className:u()("relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",{"text-gray-500":N!==n,"hover:bg-gray-50":N!==n,"text-gray-300":N===n}),onClick:function(){N!==n&&p(o+1)}},a.createElement("span",{className:"sr-only"},"Next"),a.createElement(d.Z,{className:"h-5 w-5","aria-hidden":"true"}))))))};var p=r(4406),g=r(1776),y=r(9889);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,c=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return c}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const j=function(e){var t=e.match,r=e.cart,n=e.updateCart,s=e.push,u=E((0,a.useState)(1),2),m=u[0],d=u[1],b=E((0,a.useState)(12),2),x=b[0],N=(b[1],E((0,a.useState)(!1),2)),w=N[0],j=N[1],O=(0,a.useRef)(),k=new URLSearchParams(window.location.search),S={};k.forEach((function(e,t){S[t]=e}));var C=Number(t.params.cats_sid)||0,_=l.b.filter((function(e){return e.cats_sid===C})),P=E(_,1)[0],A=JSON.parse(JSON.stringify(P||{product:[]})),Z=A.product.filter((function(e){return!S.search||i[e].name.includes(S.search)}));A.product=Z;var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=!!r.filter((function(t){return t.cat_sid===e.cat_sid})).length,c=v(r);a?c=c.map((function(r){return r.cat_sid!==e.cat_sid?r:h(h({},r),{},{buyCount:r.buyCount+t})})):c.push(h(h({},e),{},{buyCount:t})),localStorage.setItem("cart",JSON.stringify(c)),n(c)},I=function(e){s("/shop/detail/".concat(e))};return(0,a.useEffect)((function(){O.current.scrollTo(0,0)}),[C]),(0,a.useEffect)((function(){d(1)}),[t.url]),(0,a.useEffect)((function(){(0,g.O)(!0)}),[m]),a.createElement("div",{className:"relative h-full pl-4"},a.createElement("h1",{className:"text-lg font-bold"},A.name),a.createElement("ul",{className:"pr-12 mb-12 grid grid-cols-1 gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",ref:O},A.product.length?function(e){if(!Array.isArray(e))return[];var t=(m-1)*x+1,r=m*x;return e.slice(t-1,r)}(A.product).map((function(e,t){return i[e]?a.createElement("li",{key:t,className:"col-span-1 bg-white rounded-lg divide-gray-200 cursor-pointer flex flex-col",style:{maxHeight:"400px"}},a.createElement("div",{className:"w-full flex flex-1"},a.createElement("div",{className:"text-gray-900 text-sm font-medium flex flex-col justify-between"},a.createElement("div",null,a.createElement("div",{className:"w-full flex justify-center mb-4",onClick:function(){return I(e)}},a.createElement("div",{className:"relative w-56 pt-56"},a.createElement(o.Z,{img:i[e].detail&&i[e].detail.product_img&&i[e].detail.product_img[0]}),i[e].discount&&a.createElement("span",{className:"flex-shrink-0 inline-block py-2 px-4 text-white text-sm font-medium bg-black absolute top-0 right-0"},a.createElement(c.Z,{id:"shop.discount"})))),a.createElement("h3",{className:"text-lg text-center",onClick:function(){return I(e)}},a.createElement(c.Z,{id:"shop.products.".concat(i[e].intl_id)}))),a.createElement("h3",{className:"text-center text-red-600",onClick:function(){return I(e)}},a.createElement("span",{className:"mr-4 ".concat(i[e].discount?"text-yellow-600 line-through":"")},a.createElement("span",{className:"text-xl"},"NT$"),a.createElement("span",{className:"text-xl"},(0,p.x)(i[e].price))),i[e].discount&&a.createElement("span",{className:""},a.createElement("span",{className:"text-xl"},"NT$"),a.createElement("span",{className:"text-xl"},(0,p.x)(i[e].discount)))))),a.createElement("div",{className:""},a.createElement("div",{className:"flex-auto flex space-x-3 mt-4"},a.createElement("button",{className:"w-1/2 flex items-center justify-center rounded-md bg-gray-700 hover:bg-black text-white p-2",type:"submit",onClick:function(){M(i[e]),s("/cart")}},a.createElement(c.Z,{id:"shop.buy_now",defaultMessage:"直接結帳"})),a.createElement("button",{className:"w-1/2 flex items-center justify-center rounded-md border border-gray-300 p-2 hover:bg-gray-50",type:"button",onClick:function(){M(i[e]),j(!0)}},a.createElement(c.Z,{id:"shop.add_to_bag",defaultMessage:"加入購物車"}))))):null})):a.createElement("div",{className:"mt-8 col-span-3 mx-auto"},a.createElement(c.Z,{id:"shop.item_not_found",defaultMessage:"找不到商品"}),"...")),a.createElement(f,{count:A.product.length,limit:x,page:m,length:10,getdata:function(e){d(e)}}),a.createElement(y.Z,{show:w,onHide:function(){j(!1)},size:"xs",timeout:500},a.createElement("div",{className:"flex justify-center items-center"},a.createElement(c.Z,{id:"shop.result.add_success",defaultMessage:"加入成功"}))))};var O=r(5982),k=r(2371);const S=(0,n.$j)((function(e){return{cart:e.cart}}),(function(e){return{updateCart:function(t){return e((0,k.H)(t))},push:function(t,r){return e((0,O.VF)(t,r))}}}))(j)}}]);